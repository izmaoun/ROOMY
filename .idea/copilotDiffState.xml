<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/com/roomy/Controller/Dash_hotelier_Control.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/roomy/Controller/Dash_hotelier_Control.java" />
              <option name="originalContent" value="package com.roomy.Controller;&#10;&#10;import com.roomy.service.StatistiquesService;&#10;import com.roomy.Dao.HotelierDAO;&#10;import com.roomy.dto.HotelStats; // Assure-toi d'importer le DTO&#10;import javafx.fxml.FXML;&#10;import javafx.fxml.FXMLLoader;&#10;import javafx.scene.Parent;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.layout.BorderPane;&#10;import javafx.scene.text.Text;&#10;&#10;import java.io.IOException;&#10;&#10;public class Dash_hotelier_Control {&#10;&#10;    // ID de l'hôtelier connecté (Partagé avec les autres contrôleurs)&#10;    private static int currentHotelierId = 0;&#10;&#10;    public static int getCurrentHotelierId() { return currentHotelierId; }&#10;    public static void setCurrentHotelierId(int id) { currentHotelierId = id; }&#10;&#10;    @FXML private BorderPane mainBorderPane;&#10;    @FXML private Label lblwelcome;&#10;&#10;    @FXML private Text txtNbHotels;&#10;    @FXML private Text txtNbChambresTotal;&#10;    @FXML private Text txtNbChambresDispo;&#10;    @FXML private Text txtNbChambresOccupees;&#10;&#10;    private final StatistiquesService statistiquesService = new StatistiquesService();&#10;&#10;    @FXML&#10;    private void initialize() {&#10;        if (currentHotelierId &gt; 0) {&#10;            HotelierDAO hotelierDAO = new HotelierDAO();&#10;            String nomComplet = hotelierDAO.getNomComplet(currentHotelierId);&#10;            if (lblwelcome != null) lblwelcome.setText(&quot;Bienvenue, &quot; + nomComplet);&#10;&#10;            // On lance le dashboard par défaut au centre&#10;            loadDashboardContent();&#10;        }&#10;    }&#10;&#10;    // Affiche les stats globales dans la barre du haut ou le dashboard&#10;    public void refreshStats() {&#10;        try {&#10;            // Utilisation du DTO global pour éviter 4 appels BDD&#10;            HotelStats stats = statistiquesService.getGlobalStats(currentHotelierId);&#10;&#10;            if (txtNbHotels != null) txtNbHotels.setText(String.valueOf(stats.getNbHotels()));&#10;            if (txtNbChambresTotal != null) txtNbChambresTotal.setText(String.valueOf(stats.getNbChambresTotal()));&#10;            if (txtNbChambresDispo != null) txtNbChambresDispo.setText(String.valueOf(stats.getNbChambresDispo()));&#10;            if (txtNbChambresOccupees != null) txtNbChambresOccupees.setText(String.valueOf(stats.getNbChambresOccupees()));&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    // Méthode pour charger les fichiers FXML dans le centre&#10;    private void loadCenter(String fxmlFile) {&#10;        try {&#10;            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxmlFile));&#10;            Parent page = loader.load();&#10;            mainBorderPane.setCenter(page);&#10;        } catch (IOException e) {&#10;            System.err.println(&quot;Erreur chargement FXML: &quot; + fxmlFile);&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    // --- NAVIGATION ---&#10;&#10;    @FXML&#10;    private void goToDashboard() {&#10;        // Pour le dashboard, soit on recharge les stats, soit on a un FXML &quot;Accueil&quot;&#10;        // Ici, je suppose que tu veux voir les cartes :&#10;        refreshStats();&#10;        // Si tu as un contenu spécifique pour l'accueil (ex: derniers clients), charge-le ici :&#10;        // loadCenter(&quot;/fxml/accueil_dashboard.fxml&quot;);&#10;    }&#10;&#10;    private void loadDashboardContent() {&#10;        refreshStats();&#10;        // Optionnel : charger un contenu par défaut au centre&#10;    }&#10;&#10;    @FXML private void goToMesHotels() { loadCenter(&quot;/fxml/mes_hotels.fxml&quot;); }&#10;    @FXML private void goToChambres() { loadCenter(&quot;/fxml/chambres.fxml&quot;); }&#10;    @FXML private void goToStatistiques() { loadCenter(&quot;/fxml/statistiques.fxml&quot;); } // Charge le fichier ci-dessous&#10;    @FXML private void goToProfil() { loadCenter(&quot;/fxml/profil.fxml&quot;); }&#10;&#10;    @FXML&#10;    private void handleDeconnexion() {&#10;        try {&#10;            Parent login = FXMLLoader.load(getClass().getResource(&quot;/fxml/login.fxml&quot;));&#10;            mainBorderPane.getScene().setRoot(login);&#10;        } catch (Exception e) { e.printStackTrace(); }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.roomy.Controller;&#10;&#10;import com.roomy.service.StatistiquesService;&#10;import com.roomy.Dao.HotelierDAO;&#10;import com.roomy.dto.HotelStats; // Assure-toi d'importer le DTO&#10;import javafx.fxml.FXML;&#10;import javafx.fxml.FXMLLoader;&#10;import javafx.scene.Parent;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.layout.BorderPane;&#10;import javafx.scene.text.Text;&#10;&#10;import java.io.IOException;&#10;&#10;public class Dash_hotelier_Control {&#10;&#10;    // ID de l'hôtelier connecté (Partagé avec les autres contrôleurs)&#10;    private static int currentHotelierId = 0;&#10;&#10;    public static int getCurrentHotelierId() { return currentHotelierId; }&#10;    public static void setCurrentHotelierId(int id) { currentHotelierId = id; }&#10;&#10;    @FXML private BorderPane mainBorderPane;&#10;    @FXML private Label lblwelcome;&#10;&#10;    @FXML private Text txtNbHotels;&#10;    @FXML private Text txtNbChambresTotal;&#10;    @FXML private Text txtNbChambresDispo;&#10;    @FXML private Text txtNbChambresOccupees;&#10;&#10;    private final StatistiquesService statistiquesService = new StatistiquesService();&#10;&#10;    @FXML&#10;    private void initialize() {&#10;        if (currentHotelierId &gt; 0) {&#10;            HotelierDAO hotelierDAO = new HotelierDAO();&#10;            String nomComplet = hotelierDAO.getNomComplet(currentHotelierId);&#10;            if (lblwelcome != null) lblwelcome.setText(&quot;Bienvenue, &quot; + nomComplet);&#10;&#10;            // On lance le dashboard par défaut au centre&#10;            loadDashboardContent();&#10;        }&#10;    }&#10;&#10;    // Affiche les stats globales dans la barre du haut ou le dashboard&#10;    public void refreshStats() {&#10;        try {&#10;            // Utilisation du DTO global pour éviter 4 appels BDD&#10;            HotelStats stats = statistiquesService.getGlobalStats(currentHotelierId);&#10;&#10;            if (txtNbHotels != null) txtNbHotels.setText(String.valueOf(stats.getNbHotels()));&#10;            if (txtNbChambresTotal != null) txtNbChambresTotal.setText(String.valueOf(stats.getNbChambresTotal()));&#10;            if (txtNbChambresDispo != null) txtNbChambresDispo.setText(String.valueOf(stats.getNbChambresDispo()));&#10;            if (txtNbChambresOccupees != null) txtNbChambresOccupees.setText(String.valueOf(stats.getNbChambresOccupees()));&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    // Méthode pour charger les fichiers FXML dans le centre&#10;    private void loadCenter(String fxmlFile) {&#10;        try {&#10;            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxmlFile));&#10;            Parent page = loader.load();&#10;            mainBorderPane.setCenter(page);&#10;        } catch (IOException e) {&#10;            System.err.println(&quot;Erreur chargement FXML: &quot; + fxmlFile);&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    // --- NAVIGATION ---&#10;&#10;    @FXML&#10;    private void goToDashboard() {&#10;        // Pour le dashboard, soit on recharge les stats, soit on a un FXML &quot;Accueil&quot;&#10;        // Ici, je suppose que tu veux voir les cartes :&#10;        refreshStats();&#10;        // Si tu as un contenu spécifique pour l'accueil (ex: derniers clients), charge-le ici :&#10;        // loadCenter(&quot;/fxml/accueil_dashboard.fxml&quot;);&#10;    }&#10;&#10;    private void loadDashboardContent() {&#10;        refreshStats();&#10;        // Optionnel : charger un contenu par défaut au centre&#10;    }&#10;&#10;    @FXML private void goToMesHotels() { loadCenter(&quot;/fxml/mes_hotels.fxml&quot;); }&#10;    @FXML private void goToChambres() { loadCenter(&quot;/fxml/chambres.fxml&quot;); }&#10;    @FXML private void goToStatistiques() { loadCenter(&quot;/fxml/statistiques.fxml&quot;); } // Charge le fichier ci-dessous&#10;    @FXML private void goToProfil() { loadCenter(&quot;/fxml/profile.fxml&quot;); }&#10;&#10;    @FXML&#10;    private void handleDeconnexion() {&#10;        try {&#10;            Parent login = FXMLLoader.load(getClass().getResource(&quot;/fxml/login.fxml&quot;));&#10;            mainBorderPane.getScene().setRoot(login);&#10;        } catch (Exception e) { e.printStackTrace(); }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/com/roomy/Dao/ChambreDAO.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/roomy/Dao/ChambreDAO.java" />
              <option name="originalContent" value="package com.roomy.Dao;&#10;&#10;import com.roomy.entities.Chambre;&#10;import com.roomy.entities.Hotel;&#10;import com.roomy.ENUMS.TypeChambre;&#10;import com.roomy.ENUMS.Statut_technique_Chambre;&#10;&#10;import java.sql.*;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;public class ChambreDAO {&#10;&#10;    public Chambre findById(int id) {&#10;        String sql = &quot;SELECT * FROM chambres WHERE id_chambre = ?&quot;;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql)) {&#10;&#10;            ps.setInt(1, id);&#10;            ResultSet rs = ps.executeQuery();&#10;            if (rs.next()) {&#10;                return mapToChambre(rs);&#10;            }&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur findById Chambre: &quot; + e.getMessage());&#10;        }&#10;        return null;&#10;    }&#10;&#10;    public List&lt;Chambre&gt; findByHotel(int idHotel) {&#10;        List&lt;Chambre&gt; chambres = new ArrayList&lt;&gt;();&#10;        String sql = &quot;SELECT * FROM chambres WHERE id_hotel = ?&quot;;&#10;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql)) {&#10;&#10;            ps.setInt(1, idHotel);&#10;            ResultSet rs = ps.executeQuery();&#10;            while (rs.next()) {&#10;                chambres.add(mapToChambre(rs));&#10;            }&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur findByHotel Chambre: &quot; + e.getMessage());&#10;        }&#10;        return chambres;&#10;    }&#10;&#10;    public boolean ajouterChambre(Chambre ch) {&#10;        String sql = &quot;INSERT INTO chambres (num_chambre, type, prix_nuit, capacity, surface, statut, description, id_hotel) &quot;&#10;                + &quot;VALUES (?, ?, ?, ?, ?, ?, ?, ?)&quot;;&#10;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {&#10;&#10;            ps.setInt(1, ch.getNumchambre());&#10;            // Envoie &quot;Simple&quot;, &quot;Double&quot; etc. (Exactement comme dans l'Enum)&#10;            ps.setString(2, ch.getType().name());&#10;            ps.setDouble(3, ch.getPrix_nuit());&#10;            ps.setInt(4, ch.getCapacity());&#10;            ps.setInt(5, ch.getSurface());&#10;            // Envoie &quot;disponible&quot;, &quot;en_maintenance&quot; etc.&#10;            ps.setString(6, ch.getStatut().name());&#10;            ps.setString(7, ch.getDescription());&#10;&#10;            // Correction: Utilise getIdhotel() (minuscule)&#10;            ps.setInt(8, ch.getHotel().getIdhotel());&#10;&#10;            int rows = ps.executeUpdate();&#10;            if (rows &gt; 0) {&#10;                ResultSet keys = ps.getGeneratedKeys();&#10;                if (keys.next()) ch.setId(keys.getInt(1));&#10;                return true;&#10;            }&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur ajout Chambre: &quot; + e.getMessage());&#10;            e.printStackTrace();&#10;        }&#10;        return false;&#10;    }&#10;&#10;    public boolean updateChambre(Chambre ch) {&#10;        String sql = &quot;UPDATE chambres SET num_chambre=?, type=?, prix_nuit=?, capacity=?, surface=?, statut=?, description=?, id_hotel=? &quot;&#10;                + &quot;WHERE id_chambre = ?&quot;;&#10;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql)) {&#10;&#10;            ps.setInt(1, ch.getNumchambre());&#10;            ps.setString(2, ch.getType().name());&#10;            ps.setDouble(3, ch.getPrix_nuit());&#10;            ps.setInt(4, ch.getCapacity());&#10;            ps.setInt(5, ch.getSurface());&#10;            ps.setString(6, ch.getStatut().name());&#10;            ps.setString(7, ch.getDescription());&#10;            ps.setInt(8, ch.getHotel().getIdhotel());&#10;            ps.setInt(9, ch.getId());&#10;&#10;            return ps.executeUpdate() &gt; 0;&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur update Chambre: &quot; + e.getMessage());&#10;        }&#10;        return false;&#10;    }&#10;&#10;    public boolean supprimerChambre(int idChambre) {&#10;        String sql = &quot;DELETE FROM chambres WHERE id_chambre = ?&quot;;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql)) {&#10;            ps.setInt(1, idChambre);&#10;            return ps.executeUpdate() &gt; 0;&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur delete Chambre: &quot; + e.getMessage());&#10;        }&#10;        return false;&#10;    }&#10;&#10;&#10;    private Chambre mapToChambre(ResultSet rs) throws SQLException {&#10;        Chambre ch = new Chambre();&#10;        ch.setId(rs.getInt(&quot;id_chambre&quot;));&#10;        ch.setNumchambre(rs.getInt(&quot;num_chambre&quot;));&#10;        ch.setPrix_nuit(rs.getDouble(&quot;prix_nuit&quot;));&#10;        ch.setCapacity(rs.getInt(&quot;capacity&quot;));&#10;        ch.setSurface(rs.getInt(&quot;surface&quot;));&#10;        ch.setDescription(rs.getString(&quot;description&quot;));&#10;&#10;        // 1. TYPE&#10;        try {&#10;            // Lecture directe : &quot;Simple&quot; correspond à TypeChambre.Simple&#10;            ch.setType(TypeChambre.valueOf(rs.getString(&quot;type&quot;)));&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;Erreur conversion Enum Type: &quot; + rs.getString(&quot;type&quot;));&#10;            ch.setType(TypeChambre.Simple); // Valeur par défaut existante&#10;        }&#10;&#10;        // 2. STATUT&#10;        try {&#10;            // Lecture directe : &quot;disponible&quot; correspond à Statut_technique_Chambre.disponible&#10;            ch.setStatut(Statut_technique_Chambre.valueOf(rs.getString(&quot;statut&quot;)));&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;Erreur conversion Enum Statut: &quot; + rs.getString(&quot;statut&quot;));&#10;            ch.setStatut(Statut_technique_Chambre.disponible); // Valeur par défaut existante&#10;        }&#10;&#10;        // Chargement de l'hôtel&#10;        HotelDAO hotelDAO = new HotelDAO();&#10;        Hotel h = hotelDAO.findById(rs.getInt(&quot;id_hotel&quot;));&#10;        ch.setHotel(h);&#10;&#10;        return ch;&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.roomy.Dao;&#10;&#10;import com.roomy.entities.Chambre;&#10;import com.roomy.entities.Hotel;&#10;import com.roomy.ENUMS.TypeChambre;&#10;import com.roomy.ENUMS.Statut_technique_Chambre;&#10;&#10;import java.sql.*;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;public class ChambreDAO {&#10;&#10;    public Chambre findById(int id) {&#10;        String sql = &quot;SELECT * FROM chambres WHERE id_chambre = ?&quot;;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql)) {&#10;&#10;            ps.setInt(1, id);&#10;            ResultSet rs = ps.executeQuery();&#10;            if (rs.next()) {&#10;                return mapToChambre(rs);&#10;            }&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur findById Chambre: &quot; + e.getMessage());&#10;        }&#10;        return null;&#10;    }&#10;&#10;    public List&lt;Chambre&gt; findByHotel(int idHotel) {&#10;        List&lt;Chambre&gt; chambres = new ArrayList&lt;&gt;();&#10;        String sql = &quot;SELECT * FROM chambres WHERE id_hotel = ?&quot;;&#10;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql)) {&#10;&#10;            ps.setInt(1, idHotel);&#10;            ResultSet rs = ps.executeQuery();&#10;            while (rs.next()) {&#10;                chambres.add(mapToChambre(rs));&#10;            }&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur findByHotel Chambre: &quot; + e.getMessage());&#10;        }&#10;        return chambres;&#10;    }&#10;&#10;    public boolean ajouterChambre(Chambre ch) {&#10;        String sql = &quot;INSERT INTO chambres (num_chambre, type, prix_nuit, capacity, surface, statut, description, id_hotel) &quot;&#10;                + &quot;VALUES (?, ?, ?, ?, ?, ?, ?, ?)&quot;;&#10;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {&#10;&#10;            ps.setInt(1, ch.getNumchambre());&#10;            // Envoie &quot;Simple&quot;, &quot;Double&quot; etc. (Exactement comme dans l'Enum)&#10;            ps.setString(2, ch.getType().name());&#10;            ps.setDouble(3, ch.getPrix_nuit());&#10;            ps.setInt(4, ch.getCapacity());&#10;            ps.setInt(5, ch.getSurface());&#10;            // Envoie &quot;disponible&quot;, &quot;en_maintenance&quot; etc.&#10;            ps.setString(6, ch.getStatut().name());&#10;            ps.setString(7, ch.getDescription());&#10;&#10;            // Correction: Utilise getIdhotel() (minuscule)&#10;            ps.setInt(8, ch.getHotel().getIdhotel());&#10;&#10;            int rows = ps.executeUpdate();&#10;            if (rows &gt; 0) {&#10;                ResultSet keys = ps.getGeneratedKeys();&#10;                if (keys.next()) ch.setId(keys.getInt(1));&#10;                return true;&#10;            }&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur ajout Chambre: &quot; + e.getMessage());&#10;            e.printStackTrace();&#10;        }&#10;        return false;&#10;    }&#10;&#10;    public boolean updateChambre(Chambre ch) {&#10;        String sql = &quot;UPDATE chambres SET num_chambre=?, type=?, prix_nuit=?, capacity=?, surface=?, statut=?, description=?, id_hotel=? &quot;&#10;                + &quot;WHERE id_chambre = ?&quot;;&#10;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql)) {&#10;&#10;            ps.setInt(1, ch.getNumchambre());&#10;            ps.setString(2, ch.getType().name());&#10;            ps.setDouble(3, ch.getPrix_nuit());&#10;            ps.setInt(4, ch.getCapacity());&#10;            ps.setInt(5, ch.getSurface());&#10;            ps.setString(6, ch.getStatut().name());&#10;            ps.setString(7, ch.getDescription());&#10;            ps.setInt(8, ch.getHotel().getIdhotel());&#10;            ps.setInt(9, ch.getId());&#10;&#10;            return ps.executeUpdate() &gt; 0;&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur update Chambre: &quot; + e.getMessage());&#10;        }&#10;        return false;&#10;    }&#10;&#10;    public boolean supprimerChambre(int idChambre) {&#10;        String sql = &quot;DELETE FROM chambres WHERE id_chambre = ?&quot;;&#10;        try (Connection c = DBConnection.getConnection();&#10;             PreparedStatement ps = c.prepareStatement(sql)) {&#10;            ps.setInt(1, idChambre);&#10;            return ps.executeUpdate() &gt; 0;&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur delete Chambre: &quot; + e.getMessage());&#10;        }&#10;        return false;&#10;    }&#10;&#10;&#10;    private Chambre mapToChambre(ResultSet rs) throws SQLException {&#10;        Chambre ch = new Chambre();&#10;        ch.setId(rs.getInt(&quot;id_chambre&quot;));&#10;        ch.setNumchambre(rs.getInt(&quot;num_chambre&quot;));&#10;        ch.setPrix_nuit(rs.getDouble(&quot;prix_nuit&quot;));&#10;        ch.setCapacity(rs.getInt(&quot;capacity&quot;));&#10;        ch.setSurface(rs.getInt(&quot;surface&quot;));&#10;        ch.setDescription(rs.getString(&quot;description&quot;));&#10;&#10;        // 1. TYPE&#10;        try {&#10;            // Lecture directe : &quot;Simple&quot; correspond à TypeChambre.Simple&#10;            ch.setType(TypeChambre.valueOf(rs.getString(&quot;type&quot;)));&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;Erreur conversion Enum Type: &quot; + rs.getString(&quot;type&quot;));&#10;            ch.setType(TypeChambre.Simple); // Valeur par défaut existante&#10;        }&#10;&#10;        // 2. STATUT&#10;        try {&#10;            // Lecture directe : &quot;disponible&quot; correspond à Statut_technique_Chambre.disponible&#10;            ch.setStatut(Statut_technique_Chambre.valueOf(rs.getString(&quot;statut&quot;)));&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;Erreur conversion Enum Statut: &quot; + rs.getString(&quot;statut&quot;));&#10;            ch.setStatut(Statut_technique_Chambre.disponible); // Valeur par défaut existante&#10;        }&#10;&#10;        // Chargement de l'hôtel&#10;        HotelDAO hotelDAO = new HotelDAO();&#10;        Hotel h = hotelDAO.findById(rs.getInt(&quot;id_hotel&quot;));&#10;        ch.setHotel(h);&#10;&#10;        return ch;&#10;    }&#10;&#10;    // ============================================================&#10;    // Méthodes pour les statistiques du dashboard hotelier&#10;    // ============================================================&#10;&#10;    /**&#10;     * Retourne le nombre TOTAL de chambres pour un hôtelier (tous statuts confondus)&#10;     */&#10;    public int getNombreChambresTotal(int idHotelier) {&#10;        String sql = &quot;&quot;&quot;&#10;            SELECT COUNT(*) FROM chambres c&#10;            JOIN hotels h ON c.id_hotel = h.id_hotel&#10;            WHERE h.id_hotelier = ?&#10;            &quot;&quot;&quot;;&#10;        try (Connection conn = DBConnection.getConnection();&#10;             PreparedStatement ps = conn.prepareStatement(sql)) {&#10;            ps.setInt(1, idHotelier);&#10;            ResultSet rs = ps.executeQuery();&#10;            return rs.next() ? rs.getInt(1) : 0;&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur getNombreChambresTotal: &quot; + e.getMessage());&#10;            e.printStackTrace();&#10;            return 0;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Retourne le nombre de chambres DISPONIBLES pour un hôtelier&#10;     * (statut = 'disponible')&#10;     */&#10;    public int getNombreChambresDisponibles(int idHotelier) {&#10;        String sql = &quot;&quot;&quot;&#10;            SELECT COUNT(*) FROM chambres c&#10;            JOIN hotels h ON c.id_hotel = h.id_hotel&#10;            WHERE h.id_hotelier = ? AND c.statut = ?&#10;            &quot;&quot;&quot;;&#10;        try (Connection conn = DBConnection.getConnection();&#10;             PreparedStatement ps = conn.prepareStatement(sql)) {&#10;            ps.setInt(1, idHotelier);&#10;            // Utiliser le nom de l'ENUM pour la comparaison&#10;            ps.setString(2, Statut_technique_Chambre.disponible.name());&#10;            ResultSet rs = ps.executeQuery();&#10;            return rs.next() ? rs.getInt(1) : 0;&#10;        } catch (SQLException e) {&#10;            System.err.println(&quot;Erreur getNombreChambresDisponibles: &quot; + e.getMessage());&#10;            e.printStackTrace();&#10;            return 0;&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/com/roomy/entities/Utilisateur.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/roomy/entities/Utilisateur.java" />
              <option name="originalContent" value="package com.roomy.entities;&#10;&#10;// UTILISATEUR SUPPRIMÉ&#10;// La classe Utilisateur a été supprimée et ses champs ont été intégrés&#10;// directement dans les classes qui en dépendaient (Admin, Client, Hotelier).&#10;// Ce fichier est laissé comme placeholder pour historique; il ne contient&#10;// plus de classe utilitaire afin d'éviter les références à la classe." />
              <option name="updatedContent" value="package com.roomy.entities;&#10;&#10;// UTILISATEUR SUPPRIMÉ&#10;// La classe Utilisateur a été supprimée et ses champs ont été intégrés&#10;// directement dans les classes qui en dépendaient (Admin, Client, Hotelier).&#10;// Ce fichier est laissé comme placeholder pour historique; il ne contient&#10;// plus de classe utilitaire afin d'éviter les références à la classe." />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>